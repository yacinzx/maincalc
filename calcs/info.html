<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Informatique + √âconomie</title>
  <link rel="icon" type="image/png" href="images/logo.png" />
  <style>
    :root {
      /* Dark mode colors */
      --first-color: linear-gradient(135deg, #2e2e2e, #3a3a3a, #464646);
      --second-color: rgba(128, 128, 128, 0.1);
      --text-color: #e3e3e3;
      --card-color: rgba(128, 128, 128, 0.25);
      --accent-color: #7a7a7a;
      --shadow-color: 0 0px 10px rgba(0, 0, 0, 0.5);
      --circle-color: rgb(2, 12, 41);
      --dropdown-bg: rgba(73, 73, 73, 0.3);

      /* Vibrant gradient animation */
      --dark-gradient: linear-gradient(-45deg, #27081d, #1f0612, #290919, #0f273b, #060424, #080303);
      --light-gradient: linear-gradient(-45deg, #00fdcb, #55fffc, #3aa3f3, #ff5c71, #ff6262);
    }

    /* Light mode override */
    .light-mode {
      --first-color: linear-gradient(135deg, #dcdcdc, #cfcfcf, #bfbfbf);
      --second-color: rgba(200, 200, 200, 0.3);
      --text-color: #1a1a1a;
      --card-color: rgba(220, 220, 220, 0.4);
      --accent-color: #a0a0a0;
      --shadow-color: 0 0px 15px rgba(0, 0, 0, 0.2);
      --circle-color: rgb(224, 219, 219);
      --dropdown-bg: rgba(255, 255, 255, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--first-color);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden; /* block sideways */
      overflow-y: auto;
    }
    html {
      overflow-x: hidden; /* block sideways */
      overflow-y: auto;
    }
   /* =======================
       BACKGROUND CIRCLES
       ======================= */
    .circle {
      position: fixed;
      border-radius: 50%;
      z-index: 1;
      opacity: 0.9;
      animation: float 10s ease-in-out infinite;
    }

    .circle.top-left {
      width: 350px;
      height: 350px;
      background: var(--circle-color);
      top: -120px;
      left: -120px;
    }

    .circle.bottom-right {
      width: 350px;
      height: 350px;
      background: var(--circle-color);
      bottom: -120px;
      right: -120px;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(30px, -30px) scale(0.8); }
    }

        /* =======================
       BODY GRADIENT ANIMATION
       ======================= */
    body {
      background: var(--dark-gradient);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
    }

    body.light-mode {
      background: var(--light-gradient);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;

    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    /* Header */
    header {
      margin: 20px;
      border-radius: 80px;
      background: var(--second-color);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 2;
    }
    header h1 {
      font-size: 1.5rem;
      font-weight: 800;
      letter-spacing: 2px;
      color: var(--text-color);
    }
    #modeToggle ,#portfolio{
      position: absolute;
      right: 5px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--accent-color);
      color: var(--text-color);
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
      text-decoration: none;
    }
    #return {
      position: absolute;
      left: 5px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--accent-color);
      color: var(--text-color);
      border: none;
      font-size: 1.8rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }
    #return:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-color);
    }

    /* Container */
    .container {
      margin: 20px;
      padding: 20px;
      border-radius: 25px;
      background: var(--second-color);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 1;
    }
    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: var(--text-color);
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 15px;
      overflow: hidden;
      background: var(--card-color);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid rgba(0,0,0,0.2);
      color: var(--text-color);
    }
    th {
      background: var(--accent-color);
      color: var(--text-color);
    }
    input[type="number"] {
      width: 60px;
      padding: 6px;
      border-radius: 5px;
      border: 1px solid #9c9c9c;
      text-align: center;
      font-weight: 500;
      font-size: 0.7rem;
    }
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin:0;
    }

    .avg-green { color: lime; font-weight: bold; }
    .avg-red { color: red; font-weight: bold; }

    /* Footer */
    footer {
      margin: 20px;
      border-radius: 80px;
      background: var(--second-color);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 2;
    }
    footer h3 {
      font-size: 1rem;
      font-weight: 500;
      color: var(--text-color);
    }
    #portfolio:hover {
        transform: scale(1.1);
        box-shadow:  var(--shadow-color);
    }

@media (max-width: 580px) {
  header{ margin: 20px 10px;}
  .container{margin: 10px; padding: 10px;}
  table, th, td { font-size: 0.7rem; }
  input[type="number"] { width: 40px; }
  header h1 { font-size: 1.2rem; letter-spacing: 1px;}
  .circle{ width: 300px; height: 300px;}
}

@media (max-width: 395px) {
  table, th, td { font-size: 0.6rem; margin: 10px 0px ;}
  input[type="number"] { width: 30px; height: 20px; font-size: 0.55rem;}
  header h1 { font-size: 1.05rem; letter-spacing: 0;}
  .circle{width: 280px; height: 280px;}
}



  </style>
</head>
<body>
  <div class="circle top-left"></div>
  <div class="circle bottom-right"></div>

  <header>
    <h1>Informatique - LMD</h1>
    <button class="h-btn" id="modeToggle">üåô</button>
    <button class="h-btn" id="return" onclick="window.location.href='../index.html'">‚Ü©</button>
    
  </header>

<div class="container" id="semestre1-container">
  <h2>SEMESTRE 1</h2>
  <table>
    <thead>
      <tr>
        <th>Module</th>
        <th>TP</th>
        <th>TD</th>
        <th>Examen</th>
        <th>Moyenne</th>
      </tr>
    </thead>
    <tbody id="table-body1"></tbody>
    <tfoot>
      <tr>
        <th colspan="4">Moyenne G√©n√©rale</th>
        <th id="final-average1">-</th>
      </tr>
    </tfoot>
  </table>
</div>

<div class="container" id="semestre2-container">
  <h2>SEMESTRE 2</h2>
  <table>
    <thead>
      <tr>
        <th>Module</th>
        <th>TP</th>
        <th>TD</th>
        <th>Examen</th>
        <th>Moyenne</th>
      </tr>
    </thead>
    <tbody id="table-body2"></tbody>
    <tfoot>
      <tr>
        <th colspan="4">Moyenne G√©n√©rale</th>
        <th id="final-average2">-</th>
      </tr>
    </tfoot>
  </table>
</div>

  <footer>
    <h3>Cr√©√© par ‚ù§ Yacinz</h3>
    <a href="#"  id="portfolio">üßë</a>
  </footer>

  <script>
  // ===========================
// HIDE TABLE IF NO MODULES
// ===========================
function hideTable(containerId) {
  const table = document.getElementById(containerId).closest("table");
  if (table) {
    table.style.display = "none";
  }
}

// ===========================
// DATA STRUCTURE FOR FILIERES
// ===========================
const filieres = {
  info: {
    1: {
      semestre1: [
        { nom: "Analyse 1", coef: 6, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Alg√®bre 1", coef: 5, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Algo 1", coef: 6, hasTP: true, hasTD: true, weights: { tp: 0.2, td: 0.2, exam: 0.6 } },
        { nom: "Structure Machine 1", coef: 5, hasTP: true, hasTD: false, weights: { tp: 0.4, exam: 0.6 } },
        { nom: "Physique 1", coef: 4, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Langue √âtrang√®re 1", coef: 2, hasTP: false, hasTD: false, weights: { exam: 1 } },
        { nom: "TSEE", coef: 2, hasTP: false, hasTD: false, weights: { exam: 1 } }
      ],
      semestre2: [
        { nom: "Analyse 2", coef: 6, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Alg√®bre 2", coef: 4, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Algo 2", coef: 6, hasTP: true, hasTD: true, weights: { tp: 0.2, td: 0.2, exam: 0.6 } },
        { nom: "Structure Machine 2", coef: 4, hasTP: true, hasTD: false, weights: { tp: 0.4, exam: 0.6 } },
        { nom: "Physique 2", coef: 3, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "Langue √âtrang√®re 2", coef: 2, hasTP: false, hasTD: false, weights: { exam: 1 } },
        { nom: "Proba et Stat", coef: 3, hasTP: false, hasTD: true, weights: { td: 0.4, exam: 0.6 } },
        { nom: "TIC", coef: 2, hasTP: true, hasTD: false, weights: { tp: 0.4, exam: 0.6 } }
      ]
    },
    2: {
      semestre1: null,   // will hide
      semestre2: []      // will hide
    }
  },
  economie: {
    1: {
      semestre1: [], // will hide
      semestre2: []  // will hide
    }
  }
};

// ===========================
// URL PARAMETERS
// ===========================
function getParams() {
  const params = new URLSearchParams(window.location.search);
  return {
    filiere: params.get('filiere') || 'info',
    year: params.get('year') || '1'
  };
}

const { filiere, year } = getParams();

// Safely extract semestre data
const semestre1 = filieres[filiere] && filieres[filiere][year] ? filieres[filiere][year].semestre1 : [];
const semestre2 = filieres[filiere] && filieres[filiere][year] ? filieres[filiere][year].semestre2 : [];

// ===========================
// CREATE TABLE
// ===========================
function createTable(modules, tbodyId) {
  document.getElementById(tbodyId).innerHTML = modules.map((mod, i) => `
    <tr>
      <td>${mod.nom}</td>
      <td>${mod.hasTP ? `<input type="number" min="0" max="20" id="tp${tbodyId}${i}" oninput="calculer('${tbodyId}')">` : '-'}</td>
      <td>${mod.hasTD ? `<input type="number" min="0" max="20" id="td${tbodyId}${i}" oninput="calculer('${tbodyId}')">` : '-'}</td>
      <td><input type="number" min="0" max="20" id="exam${tbodyId}${i}" oninput="calculer('${tbodyId}')"></td>
      <td id="avg${tbodyId}${i}">-</td>
    </tr>`).join('');
}

// ===========================
// CALCULATE AVERAGES
// ===========================
function calculer(tbodyId) {
  const mods = tbodyId === 'table-body1' ? semestre1 : semestre2;
  let total = 0, coefSum = 0;

  mods.forEach((mod, i) => {
    let tp = mod.hasTP ? parseFloat(document.getElementById(`tp${tbodyId}${i}`).value) || 0 : 0;
    let td = mod.hasTD ? parseFloat(document.getElementById(`td${tbodyId}${i}`).value) || 0 : 0;
    let exam = parseFloat(document.getElementById(`exam${tbodyId}${i}`).value) || 0;

    let moyenne = 0;
    if (mod.hasTP) moyenne += mod.weights.tp * tp;
    if (mod.hasTD) moyenne += mod.weights.td * td;
    moyenne += mod.weights.exam * exam;

    total += moyenne * mod.coef;
    coefSum += mod.coef;

    const avgCell = document.getElementById(`avg${tbodyId}${i}`);
    avgCell.textContent = moyenne.toFixed(2);
    avgCell.className = moyenne >= 10 ? 'avg-green' : 'avg-red';
  });

  const finalAvg = total / coefSum;
  const finalAvgEl = document.getElementById(
    tbodyId === 'table-body1' ? 'final-average1' : 'final-average2'
  );
  finalAvgEl.textContent = isNaN(finalAvg) ? "-" : finalAvg.toFixed(2);
  finalAvgEl.className = finalAvg >= 10 ? 'avg-green' : 'avg-red';
}

// ===========================
// INITIALIZE TABLES
// ===========================
renderTable(data.semestre1, "semestre1");
renderTable(data.semestre2, "semestre2");
  // ==========================
  // LIGHT/DARK MODE TOGGLE
  // ==========================
  const toggleBtn = document.getElementById("modeToggle");
  toggleBtn.addEventListener("click", () => {
    document.body.classList.toggle("light-mode");
    if (document.body.classList.contains("light-mode")) {
      toggleBtn.textContent = "üîÜ";
      localStorage.setItem("theme", "light");
    } else {
      toggleBtn.textContent = "üåô";
      localStorage.setItem("theme", "dark");
    }
  });

  if (localStorage.getItem("theme") === "light") {
    document.body.classList.add("light-mode");
    toggleBtn.textContent = "üîÜ";
  }

  // ==========================
  // DISABLE INSPECT / RIGHT CLICK
  // ==========================
  document.addEventListener("keydown", function (e) {
    if (e.ctrlKey && (e.key.toLowerCase() === "u" || e.key.toLowerCase() === "i")) {
      e.preventDefault();
      alert("Sorry, u can't üö´");
    }
  });

  document.addEventListener("contextmenu", function (e) {
    e.preventDefault();
  });
function renderTable(modules, semestreId) {
  const container = document.getElementById(`${semestreId}-container`);
  const tbody = document.getElementById(`table-body${semestreId === "semestre1" ? "1" : "2"}`);
  const finalAverage = document.getElementById(`final-average${semestreId === "semestre1" ? "1" : "2"}`);

  // If no modules ‚Üí hide the whole container
  if (!modules || modules.length === 0) {
    container.style.display = "none";
    return;
  }

  // Otherwise show it
  container.style.display = "block";

  // Reset previous rows
  tbody.innerHTML = "";

  // Add rows for each module
  modules.forEach(mod => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${mod.nom}</td>
      <td>${mod.hasTP ? `<input type="number" class="note tp">` : "-"}</td>
      <td>${mod.hasTD ? `<input type="number" class="note td">` : "-"}</td>
      <td><input type="number" class="note exam"></td>
      <td class="moyenne">-</td>
    `;
    tbody.appendChild(row);
  });

  // Reset moyenne g√©n√©rale
  finalAverage.textContent = "-";
}
  </script>
</body>
</html>
